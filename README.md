# Redis Proxy

Этот простой прокси-сервер для Redis, который принимает соединения на заданном порту и перенаправляет их на upstream Redis-сервер.

## Структура репозитория

- **`redis-proxy.py`**  
  Основной скрипт прокси-сервера. В нём задаются параметры подключения к Redis (адрес, порт, пароль), а также список доверенных IP-адресов. TODO (Реализовать разных пользователей )

- **`redis-proxy.service`**  
  Unit-файл для systemd, позволяющий запускать прокси как системный сервис.

## Возможности

- **Фильтрация по IP**  
  Если клиент подключается с доверенного IP, прокси автоматически выполняет `AUTH` к upstream Redis перед установлением двунаправленного соединения.

## Конфигурация

Все настройки изменяются в `redis-proxy.py`:

- **`REDIS_HOST`** — адрес сервера Redis (по умолчанию `127.0.0.1`).  
- **`REDIS_PORT`** — порт Redis (по умолчанию `6380`).  
- **`LISTEN_PORT`** — порт, на котором слушает прокси (по умолчанию `6379`).  
- **`REDIS_PASSWORD`** — пароль для подключения к Redis.  
- **`TRUSTED_IPS`** — список доверенных IP-адресов или подсетей (например, `['127.0.0.1', '192.168.0.2']`).  

## Установка и запуск

1. Убедитесь, что Redis запущен и доступен по указанным адресу и порту.  
2. Запустите прокси вручную:  
   ```bash
   python3 redis-proxy.py
   ```
3. (Опционально) Установите systemd-сервис и запустите его (перед этим проверь что путь до скрипта указан верно):  
   ```bash
   sudo cp redis-proxy.service /etc/systemd/system/
   sudo systemctl daemon-reload
   sudo systemctl enable --now redis-proxy
   ```
